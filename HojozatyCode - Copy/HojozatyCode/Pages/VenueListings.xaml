<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HojozatyCode.Pages.CategoryVenuesPage"
             BackgroundColor="#FAFAFA">

    <!-- Resources remain the same as previous enhanced version -->

    <ScrollView>
        <VerticalStackLayout Spacing="0" Padding="20">
            <!-- Search and Filters Header -->
            <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,24">
                <Border StrokeShape="RoundRectangle 12"
                        StrokeThickness="0"
                        BackgroundColor="{StaticResource SurfaceColor}"
                        Shadow="Brush:Black Radius=12, Opacity=0.08, Offset=0,4">
                    <Grid ColumnDefinitions="Auto,*" Padding="12,0">
                        <Label Text="􀊫" 
                               FontFamily="MaterialIcons"
                               VerticalOptions="Center"
                               Margin="0,0,8,0"/>
                        <Entry Placeholder="Search venues..." 
                               Style="{StaticResource SearchEntry}"
                               Grid.Column="1"/>
                    </Grid>
                </Border>
                <Button Grid.Column="1" 
                      Text="􀋃" 
                      FontFamily="MaterialIcons"
                      WidthRequest="48"
                      HeightRequest="48"
                      CornerRadius="12"
                      Margin="12,0,0,0"
                      Command="{Binding OpenAdvancedFiltersCommand}"/>
            </Grid>


            <!-- Quick Filters -->
            <HorizontalStackLayout Spacing="12" Margin="0,0,0,24">
                <Border StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        Stroke="{StaticResource BorderColor}"
                        BackgroundColor="{StaticResource SurfaceColor}"
                        Padding="16,10">
                    <HorizontalStackLayout Spacing="8">
                        <Label Text="􀊵" FontFamily="MaterialIcons"/>
                        <Label Text="Capacity"/>
                        <Label Text="100+" TextColor="{StaticResource PrimaryColor}"/>
                    </HorizontalStackLayout>
                </Border>
                <!-- Repeat similar structure for other filter chips -->
            </HorizontalStackLayout>

            <!-- Featured Spaces Carousel -->
            <Label Text="Featured Spaces" Style="{StaticResource DisplaySmall}" Margin="0,0,0,16"/>
            <CarouselView ItemsSource="{Binding FeaturedVenues}"
                         HeightRequest="280"
                         PeekAreaInsets="32">
                <CarouselView.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="8">
                            <Border StrokeShape="RoundRectangle 24"
                                    BackgroundColor="White"
                                    Shadow="Brush:Black Radius=16, Opacity=0.1, Offset=0,4">
                                <Grid>
                                    <Image Source="{Binding MainImage}" 
                                         Aspect="AspectFill"
                                         HeightRequest="240"/>
                                    <BoxView BackgroundColor="#80000000"
                                             CornerRadius="24"/>
                                    <!-- Content remains same as before -->
                                </Grid>
                            </Border>
                        </Grid>
                    </DataTemplate>
                </CarouselView.ItemTemplate>
            </CarouselView>

            <!-- All Venues List -->
            <Label Text="All Venues" Style="{StaticResource DisplaySmall}" Margin="0,24,0,16"/>
            <RefreshView IsRefreshing="{Binding IsLoading}"
                       Command="{Binding RefreshCommand}">
                <CollectionView ItemsSource="{Binding Venues}"
                              EmptyView="{Binding EmptyStateView}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border StrokeShape="RoundRectangle 24"
                                    BackgroundColor="White"
                                    Shadow="Brush:Black Radius=8, Opacity=0.08, Offset=0,2"
                                    Margin="0,0,0,16">
                                <Grid RowDefinitions="200,1*,Auto" 
                                    ColumnDefinitions="*,Auto"
                                    Padding="16">
                                    <!-- Image and content remains same -->
                                    <Border Grid.Column="1"
                                          StrokeShape="RoundRectangle 20"
                                          BackgroundColor="#4D000000"
                                          WidthRequest="40"
                                          HeightRequest="40"
                                          Padding="0">
                                        <Label Text="􀋄" 
                                             FontFamily="MaterialIcons"
                                             HorizontalOptions="Center"
                                             VerticalOptions="Center"
                                             TextColor="White"/>
                                    </Border>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </RefreshView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>