<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:HojozatyCode.ViewModels"
             xmlns:models="clr-namespace:HojozatyCode.Models"
             x:Class="HojozatyCode.Pages.FiltersPage"
             x:DataType="viewModels:FilterVenueViewModel"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="True"
             Title="Filters"
             BackgroundColor="{StaticResource BackgroundColor}">

    <ContentPage.Resources>
        <!-- Color Palette -->
        <Color x:Key="PrimaryColor">#4F378A</Color>
        <Color x:Key="LightPrimaryColor">#6750A4</Color>
        <Color x:Key="SurfaceColor">#FFFFFF</Color>
        <Color x:Key="OnSurfaceColor">#1C1B1F</Color>
        <Color x:Key="SecondaryColor">#625B71</Color>
        <Color x:Key="BackgroundColor">#FAFAFA</Color>

        <!-- Base Label -->
        <Style TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource OnSurfaceColor}" />
            <Setter Property="FontFamily" Value="OpenSans-Regular" />
        </Style>

        <!-- Entry with uniform vertical spacing; internal padding removed -->
        <Style TargetType="Entry">
            <Setter Property="BackgroundColor" Value="{StaticResource SurfaceColor}" />
            <Setter Property="TextColor" Value="{StaticResource OnSurfaceColor}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontFamily" Value="OpenSans-Regular" />
            <Setter Property="HeightRequest" Value="40" />
            <Setter Property="Margin" Value="0,8" />
        </Style>

        <!-- Primary Button -->
        <Style TargetType="Button">
            <Setter Property="BackgroundColor" Value="{StaticResource PrimaryColor}" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="16,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontFamily" Value="OpenSans-SemiBold" />
            <Setter Property="HeightRequest" Value="48" />
        </Style>

        <!-- Section Titles -->
        <Style x:Key="SectionTitle" TargetType="Label">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="Margin" Value="0,16,0,8" />
            <Setter Property="TextColor" Value="{StaticResource OnSurfaceColor}" />
            <Setter Property="FontFamily" Value="OpenSans-Bold" />
        </Style>

        <!-- Container Border for each section -->
        <Style x:Key="OptionBorder" TargetType="Border">
            <Setter Property="StrokeShape">
                <Setter.Value>
                    <RoundRectangle CornerRadius="12"/>
                </Setter.Value>
            </Setter>
            <Setter Property="BackgroundColor" Value="{StaticResource SurfaceColor}" />
            <Setter Property="Stroke" Value="#E7E0EC" />
            <Setter Property="Padding" Value="16" />
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="24">

            <!-- PRICE RANGE -->
            <Label Text="Price Range" Style="{StaticResource SectionTitle}" />
            <Border Style="{StaticResource OptionBorder}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Min Price" />
                    <Entry Text="{Binding MinPrice}"
                           Placeholder="e.g. 100"
                           Keyboard="Numeric"/>

                    <Label Text="Max Price" />
                    <Entry Text="{Binding MaxPrice}"
                           Placeholder="e.g. 5000"
                           Keyboard="Numeric"/>
                </VerticalStackLayout>
            </Border>

            <!-- CAPACITY -->
            <Label Text="Capacity" Style="{StaticResource SectionTitle}" />
            <Border Style="{StaticResource OptionBorder}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Min Capacity" />
                    <Entry Text="{Binding MinCapacity}"
                           Placeholder="e.g. 50"
                           Keyboard="Numeric"/>

                    <Label Text="Max Capacity" />
                    <Entry Text="{Binding MaxCapacity}"
                           Placeholder="e.g. 300"
                           Keyboard="Numeric"/>
                </VerticalStackLayout>
            </Border>

            <!-- INSTANT BOOK TOGGLE -->
            <Label Text="Booking Options" Style="{StaticResource SectionTitle}" />
            <Border Style="{StaticResource OptionBorder}">
                <VerticalStackLayout Spacing="8">
                    <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                        <Label Text="Instant Book"
                               FontSize="16"/>
                        <Switch IsToggled="{Binding InstantBook}"
                                OnColor="{StaticResource PrimaryColor}"
                                ThumbColor="White"/>
                    </HorizontalStackLayout>
                    <Label Text="Only show venues that can be booked instantly"
                           FontSize="13"
                           TextColor="{StaticResource SecondaryColor}"/>
                </VerticalStackLayout>
            </Border>

            <!-- SPACE TYPES -->
            <Label Text="Select Space Types" Style="{StaticResource SectionTitle}" />
            <Border Style="{StaticResource OptionBorder}">
                <CollectionView ItemsSource="{Binding SpaceTypes}"
                                SelectionMode="None">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Vertical"
                                           ItemSpacing="12"/>
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:SpaceType">
                            <HorizontalStackLayout Spacing="12">
                                <CheckBox IsChecked="{Binding IsSelected}" />
                                <Label Text="{Binding Name}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Border>

            <!-- ACTION BUTTONS -->
            <HorizontalStackLayout Spacing="16"
                                   Margin="0,8,0,24">
                <Button Text="Clear All"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource PrimaryColor}"
                        BorderColor="{StaticResource PrimaryColor}"
                        BorderWidth="1"
                        CornerRadius="10"
                        Padding="16,10"
                        WidthRequest="120"
                        Command="{Binding ClearFiltersCommand}"/>

                <Button Text="View Spaces"
                        HorizontalOptions="FillAndExpand"
                        Command="{Binding ApplyFiltersCommand}"/>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
